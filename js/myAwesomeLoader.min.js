
(function(a){a.fn.myAwesomeLoader=function(b){var c={loadingMessage:"Chargement",type:"dots",numberOfDots:5,dotType:"round",dotEffect:"rotateY",dotWidth:"20px",dotHeight:"20px",barWidth:"200px",barHeight:"5px",border:true,loaderColor:"0075b2",logoPath:"../logo.svg",logoEffect:"",percentage:true};params=a.extend(c,b);return this.each(function(){a(this).prepend('<div class = "myAwesomeLoader"><p class = "loadingMessage">'+params.loadingMessage+'</p><div id="barWrapper"><div id="bar"></div></div><p id="percentage"></p></div>');if(params.logoPath!==""){a(".myAwesomeLoader").prepend('<div class = "loader-img"><img src='+params.logoPath+' alt="Logo" id="logo"/></div>')}function e(){var o=a("html").find("img[src]");a("html [style]").each(function(){var p=a(this).css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");if(p&&p!="none"){o=o.add(a('<img src="'+p+'"/>'))}});a("#barWrapper").width(params.barWidth);var j=a("#barWrapper");var n=a("#bar");var i=a("#percentage");var m=0;duration=1000;function k(p,q){i.text(parseInt(p)+" %")}function l(){percentageValue=0;if(o.length){percentageValue=parseInt((m/o.length)*100)}n.stop().animate({width:percentageValue+"%"},duration);j.stop().animate({percentage:percentageValue},{duration:duration,step:k})}if(o.length){l();o.load(function(){a(this).off("load");m++;l()})}}e();if(params.percentage===false){a("#percentage").remove()}switch(params.type){case"dots":a(function(){a(".myAwesomeLoader").append('<div class = "loading"></div>');for(var j=1;j<=params.numberOfDots;++j){a(".loading").each(function(){a(this).append('<span class="dot blank" data-dot='+j+"> </span>")})}if(params.border===false){a(".dot").css("border","none")}else{a(".dot").css("border-color","#"+params.loaderColor)}a("[data-dot]").each(function(){switch(params.dotType){case"square":break;case"round":a(this).addClass("round");break}});a(".dot").width(params.dotWidth).height(params.dotHeight);loads=a(".dot").length;filling="";function i(){function m(n){clearTimeout(o);var o=setTimeout(function(){a("[data-dot="+n+"]").toggleClass("filled").toggleClass("blank");a(".filled").css("background","#"+params.loaderColor);switch(params.dotEffect){case"rotateX":a("[data-dot="+n+"]").toggleClass("rotateX");break;case"rotateY":a("[data-dot="+n+"]").toggleClass("rotateY");break;case"rotateZ":a("[data-dot="+n+"]").toggleClass("rotateZ");break;case"bounce":a("[data-dot="+n+"]").toggleClass("bounce");break}},n*200)}for(var k=1;k<=loads;++k){m(k)}var l=setTimeout(function(){i()},200*params.numberOfDots)}i()});break;case"bar":a("#bar, #barWrapper").show();if(params.border===false){a("#barWrapper").css("border","none")}else{a("#barWrapper").css("border-color","#"+params.loaderColor)}a("#bar").css("background","#"+params.loaderColor);a("#barWrapper").height(params.barHeight);break}switch(params.logoEffect){case"rotateX":function g(){a("#logo").toggleClass("rotateX");var i=setTimeout(function(){g()},200*params.numberOfDots)}g();break;case"rotateY":function f(){a("#logo").toggleClass("rotateY");var i=setTimeout(function(){f()},200*params.numberOfDots)}f();break;case"rotateZ":function d(){a("#logo").toggleClass("rotateZ");var i=setTimeout(function(){d()},200*params.numberOfDots)}d();break;case"bounce":function h(){a("#logo").toggleClass("bounce");var i=setTimeout(function(){h()},200*params.numberOfDots)}h();break;case"verticalUncover":a(".loader-img").append('<div class="mask"></div>');a(".mask").stop(true,true).animate({height:percentageValue+"%"},duration);break;case"horizontalUncover":a(".loader-img").append('<div class="mask"></div>');a(".mask").stop(true,true).animate({width:percentageValue+"%"},duration);break}});return this};a(window).load(function(){setTimeout(function(){a(".myAwesomeLoader").fadeOut("500",function(){a(this).remove()})},duration)})})(jQuery);